<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title th:text="#{login.titulo}">Tela de Login</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <!-- Seletor de Idioma no topo -->
    <div class="container-fluid bg-light border-bottom">
      <div class="container py-2">
        <div class="d-flex justify-content-end">
          <div class="dropdown">
            <button
              class="btn btn-sm btn-outline-secondary dropdown-toggle"
              type="button"
              id="languageDropdown"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <span th:text="${#locale.language == 'pt' ? '🇧🇷' : '🇺🇸'}"
                >🌐</span
              >
            </button>
            <ul
              class="dropdown-menu dropdown-menu-end"
              aria-labelledby="languageDropdown"
            >
              <li>
                <a class="dropdown-item" th:href="@{/login(lang='pt')}">🇧🇷</a>
              </li>
              <li>
                <a class="dropdown-item" th:href="@{/login(lang='en')}">🇺🇸</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="container" style="text-align: center; margin-top: 50px">
      <div class="row">
        <h1>AutoTTU</h1>
      </div>

      <div th:if="${msgSucesso}" class="alert alert-success">
        <span th:text="${msgSucesso}"></span>
      </div>
      <div th:if="${msgErro}" class="alert alert-danger">
        <span th:text="${msgErro}"></span>
      </div>

      <div th:if="${param.logout}">
        <p style="color: green" th:text="#{login.logout_sucesso}">
          <b>Logout efetuado com sucesso!</b>
        </p>
      </div>

      <div class="row justify-content-center">
        <div class="col-12 col-md-6 col-lg-4">
          <form th:action="@{/login}" method="post">
            <div class="mb-3 text-start">
              <label
                for="username"
                class="form-label"
                th:text="#{login.usuario}"
                >Username:</label
              >
              <input
                class="form-control"
                type="text"
                id="username"
                name="username"
              />
            </div>

            <div class="mb-3 text-start">
              <label for="password" class="form-label" th:text="#{login.senha}"
                >Senha:</label
              >
              <input
                class="form-control"
                type="password"
                id="password"
                name="password"
              />
            </div>

            <div th:if="${param.error}">
              <p style="color: red" th:text="#{login.erro}">
                <b>Usuário ou senha inválidos!</b>
              </p>
            </div>

            <button
              type="submit"
              class="btn btn-primary w-100"
              th:text="#{login.botao}"
            >
              Efetuar Login
            </button>

            <div class="mt-3">
              <a href="/registrar" th:text="#{usuario.registrar}"
                >Registrar-se</a
              >
            </div>
          </form>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
