<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="~{fragmentos :: cabecalho(${pageTitle})}" />
  <body>
    <div th:replace="~{fragmentos :: navegacao(${usuarioLogado})}"></div>

    <div class="container mt-4">
      <div th:replace="~{fragmentos :: saudacoes(${usuarioLogado})}" />

      <div class="row mb-3">
        <div class="col-12">
          <h1 th:text="${pageTitle}">Solicitar Test Ride</h1>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <div
            th:if="${msgErro}"
            class="alert alert-danger"
            th:text="${msgErro}"
          ></div>

          <form th:object="${testride}" th:action="@{/testrides}" method="post">
            <div class="mb-3">
              <label
                for="moto"
                class="form-label"
                th:text="#{testride.moto.label}"
                >Moto</label
              >
              <select class="form-select" name="motoId" id="moto">
                <option value="" th:text="#{testride.moto.selecione}">
                  Selecione uma moto
                </option>
                <option
                  th:each="moto : ${motos}"
                  th:value="${moto.id}"
                  th:selected="${testride.moto != null and testride.moto.id == moto.id}"
                  th:text="${moto.modelo + ' - ' + moto.placa}"
                ></option>
              </select>
              <div th:if="${#fields.hasErrors('moto')}" class="text-danger">
                <span th:errors="*{moto}"></span>
              </div>
            </div>

            <div class="mb-3">
              <label
                for="usuario"
                class="form-label"
                th:text="#{testride.usuario.label}"
                >Solicitante</label
              >
              <select class="form-select" name="usuarioId" id="usuario">
                <option value="" th:text="#{testride.usuario.selecione}">
                  Selecione o usuário
                </option>
                <option
                  th:each="u : ${usuarios}"
                  th:value="${u.id}"
                  th:selected="${testride.usuario != null and testride.usuario.id == u.id}"
                  th:text="${u.nome}"
                ></option>
              </select>
              <div th:if="${#fields.hasErrors('usuario')}" class="text-danger">
                <span th:errors="*{usuario}"></span>
              </div>
            </div>

            <div class="mb-3">
              <label
                for="proposito"
                class="form-label"
                th:text="#{testride.proposito.label}"
                >Propósito do Teste</label
              >
              <input
                type="text"
                class="form-control"
                th:field="*{proposito}"
                id="proposito"
                th:placeholder="#{testride.proposito.placeholder}"
              />
              <div
                th:if="${#fields.hasErrors('proposito')}"
                class="text-danger"
              >
                <span th:errors="*{proposito}"></span>
              </div>
            </div>

            <div class="mb-3">
              <label
                for="dataDesejada"
                class="form-label"
                th:text="#{testride.data_desejada.label}"
                >Data Desejada</label
              >
              <input
                type="date"
                class="form-control"
                th:field="*{dataDesejada}"
                id="dataDesejada"
              />
              <div
                th:if="${#fields.hasErrors('dataDesejada')}"
                class="text-danger"
              >
                <span th:errors="*{dataDesejada}"></span>
              </div>
            </div>

            <div class="mb-3">
              <label
                for="observacoes"
                class="form-label"
                th:text="#{testride.observacoes.label}"
                >Observações</label
              >
              <textarea
                class="form-control"
                th:field="*{observacoes}"
                id="observacoes"
                rows="3"
              ></textarea>
            </div>

            <div class="mb-3">
              <input
                type="hidden"
                name="_csrf"
                th:value="${_csrf != null ? _csrf.token : ''}"
              />
              <button
                type="submit"
                class="btn btn-primary"
                th:text="#{form.enviar_solicitacao}"
              >
                Enviar Solicitação
              </button>
              <a
                href="/testrides"
                class="btn btn-secondary"
                th:text="#{form.cancelar}"
                >Cancelar</a
              >
            </div>
          </form>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
