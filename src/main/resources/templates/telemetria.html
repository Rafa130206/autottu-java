<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
  <head
    th:replace="~{fragmentos :: cabecalho('Painel de Controle - Actuator')}"
  />
  <body>
    <div th:replace="~{fragmentos :: navegacao(${usuarioLogado})}"></div>

    <div class="container mt-4">
      <div th:replace="~{fragmentos :: saudacoes(${usuarioLogado})}" />

      <div class="row">
        <div class="col-12">
          <h1 th:text="#{actuator.titulo}">Painel de Controle - Actuator</h1>
          <p class="lead" th:text="#{actuator.descricao}">
            Monitoramento em tempo real da aplicação AutoTTU
          </p>
        </div>
      </div>

      <!-- Mensagem de erro (se houver) -->
      <div class="row mt-3" th:if="${error}">
        <div class="col-12">
          <div class="alert alert-danger" role="alert">
            <h5 class="alert-heading">
              <i class="bi bi-exclamation-triangle"></i> Erro
            </h5>
            <p th:text="${error}"></p>
          </div>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
              <h5 class="mb-0">
                <i class="bi bi-bar-chart-line"></i>
                <span th:text="#{actuator.metricas}">Métricas do Sistema</span>
              </h5>
            </div>
            <div class="card-body">
              <table class="table table-hover table-bordered">
                <tbody>
                  <tr>
                    <td class="fw-bold" style="width: 60%">
                      <i class="bi bi-heart-pulse text-success"></i>
                      <span th:text="#{actuator.status}"
                        >Status da aplicação:</span
                      >
                    </td>
                    <td>
                      <span
                        class="badge bg-success"
                        th:text="${health.status}"
                      ></span>
                    </td>
                  </tr>

                  <tr>
                    <td class="fw-bold">
                      <i class="bi bi-cpu text-info"></i>
                      <span th:text="#{actuator.cpu}">Uso da CPU (%):</span>
                    </td>
                    <td>
                      <span
                        class="badge bg-info"
                        th:text="${cpu_usage} + '%'"
                      ></span>
                    </td>
                  </tr>

                  <tr>
                    <td class="fw-bold">
                      <i class="bi bi-memory text-warning"></i>
                      <span th:text="#{actuator.jvm_used}"
                        >Memória utilizada pela JVM (MB):</span
                      >
                    </td>
                    <td>
                      <span
                        class="badge bg-warning text-dark"
                        th:text="${jvm_used} + ' MB'"
                      ></span>
                    </td>
                  </tr>

                  <tr>
                    <td class="fw-bold">
                      <i class="bi bi-hdd text-danger"></i>
                      <span th:text="#{actuator.jvm_max}"
                        >Memória máxima alocada para JVM (GB):</span
                      >
                    </td>
                    <td>
                      <span
                        class="badge bg-danger"
                        th:text="${jvm_max} + ' GB'"
                      ></span>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <div class="alert alert-info" role="alert">
            <h5 class="alert-heading">
              <i class="bi bi-info-circle"></i>
              <span th:text="#{actuator.info_titulo}">Informação</span>
            </h5>
            <p th:text="#{actuator.info_texto}">
              Você pode acessar todos os endpoints do Actuator diretamente em:
              <a href="/actuator" target="_blank">/actuator</a>
            </p>
            <hr />
            <p class="mb-0">
              <strong th:text="#{actuator.endpoints}"
                >Endpoints disponíveis:</strong
              >
              <br />
              •
              <a href="/actuator/health" target="_blank">/actuator/health</a> -
              <span th:text="#{actuator.health_desc}">Status de saúde</span
              ><br />
              •
              <a href="/actuator/metrics" target="_blank">/actuator/metrics</a>
              - <span th:text="#{actuator.metrics_desc}">Lista de métricas</span
              ><br />
              • <a href="/actuator/env" target="_blank">/actuator/env</a> -
              <span th:text="#{actuator.env_desc}">Variáveis de ambiente</span
              ><br />
              • <a href="/actuator/info" target="_blank">/actuator/info</a> -
              <span th:text="#{actuator.info_desc}"
                >Informações da aplicação</span
              >
            </p>
          </div>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col-12">
          <a href="/menu" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i>
            <span th:text="#{botao_voltar}">Voltar para Menu</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />

    <!-- Bootstrap Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
